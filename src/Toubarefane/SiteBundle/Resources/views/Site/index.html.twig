{# src/Sdz/BlogBundle/Resources/views/Blog/index.html.twig #}

{% extends "ToubarefaneSiteBundle::layout.html.twig" %}

{% block title %}
Accueil - {{ parent() }}
{% endblock %}

{% block toubarefanesite_body %}

  <article class="col-xs-12 col-lg-8 col-md-8">
      <header class="panel panel-info" style="font-family:inherit ; font-weight:bold; text-transform: uppercase;color: #000;"> {{chemin | replace({'Video>>': ''})}}</header>
      <p>{{ipclient}}</p> 
   {% for article in articles %}
 {% if article.file is not null %}
   <div class="col-lg-12 col-md-12 col-xs-12">
                         
                            {% if article.file.type=="image" %}
                            
                            <img class="oimg img-responsive img-thumbnail" src="{{ asset(article.file.uploadDir ~ '/' ~article.file.url ) }}"  alt="{{ article.file.name }}" />
                           {% elseif article.file.type=="video" %}
                            
                           <video class="oimg img-responsive img-thumbnail" src="{{ asset(article.file.uploadDir ~ '/' ~article.file.url ) }}"  controls="controls"><p>{{ article.file.name }}</p></video>
                            {% elseif article.file.type=="youtube" %}
                             {% set clef=article.file.description |slice(38,35)%}
                             {% set url='<iframe class="ovideo img-responsive img-thumbnail"  src="lien?rel=0&amp;autoplay=0&amp;controls=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>' %}
                                
                             {{ url | replace({'lien': clef}) | raw  }}
                      
                           {% else %}
                           
                           <audio class="oaudio img-responsive img-thumbnail" src="{{ asset(article.file.uploadDir ~ '/' ~article.file.url ) }}"  controls="controls" >{{ article.file.name }}</audio>
                           
                           {% endif %}
                        
                        
                            
  
                           <i class="auteur">Par {{ article.auteur }}, le {{ article.date|date('d/m/Y') }}</i>
                            <h3 class="text-center"> <span class="glyphicon glyphicon-camera"></span>{{ article.titre}}</h3><div class="fb-share-button">
                                  </div>
                           <div class="panel panel-body textbody">
                            {{ article.contenu }}
                           </div>
                          
                         </div>
                   
        {% endif %}
      <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/fr_FR/sdk.js#xfbml=1&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
 
{% endfor %} 
</article>
{% include "ToubarefaneSiteBundle:Site:nousuivre.html.twig" %}
        <script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/fr_FR/sdk.js#xfbml=1&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
                  
{# S'il y a plus d'une page, on affiche la liste des pages #}
  {% if nb_page > 1 %}
<div class="pagination pagination-sm col-lg-11 col-md-11 col-xs-11">
    <ul class="pager center">
      {# On utilise la fonction range(a, b) qui cr√©e un tableau de valeurs entre a et b #}
      {% for p in range(1, nb_page) %}
        <li{% if p == page %} class="active menu"{% endif %} >
            <button type="button" class="btn btn-default"><a href="{{ path('toubarefanesite_accueil', {'page': p}) }}" >{{ p }}</a></button>
        </li>
      {% endfor %}
    </ul>
  </div>
{% endif %}
{% endblock %}
   